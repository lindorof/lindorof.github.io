<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3.2. 数据类型 | Lindorof</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="Lindorof's Blog">
    <link rel="preload" href="/assets/css/0.styles.8ac2847d.css" as="style"><link rel="preload" href="/assets/js/app.b639eb72.js" as="script"><link rel="preload" href="/assets/js/2.5df156af.js" as="script"><link rel="preload" href="/assets/js/28.2574be13.js" as="script"><link rel="prefetch" href="/assets/js/10.ee4568ff.js"><link rel="prefetch" href="/assets/js/11.8db0767a.js"><link rel="prefetch" href="/assets/js/12.92a4e660.js"><link rel="prefetch" href="/assets/js/13.e2450b62.js"><link rel="prefetch" href="/assets/js/14.5ae14743.js"><link rel="prefetch" href="/assets/js/15.62a967cf.js"><link rel="prefetch" href="/assets/js/16.3482df63.js"><link rel="prefetch" href="/assets/js/17.881a9d91.js"><link rel="prefetch" href="/assets/js/18.d6e19ee5.js"><link rel="prefetch" href="/assets/js/19.caf0829a.js"><link rel="prefetch" href="/assets/js/20.a80e123c.js"><link rel="prefetch" href="/assets/js/21.9c810086.js"><link rel="prefetch" href="/assets/js/22.bc5f69cb.js"><link rel="prefetch" href="/assets/js/23.f15ef55d.js"><link rel="prefetch" href="/assets/js/24.b8714e3e.js"><link rel="prefetch" href="/assets/js/25.d673c092.js"><link rel="prefetch" href="/assets/js/26.28d57b84.js"><link rel="prefetch" href="/assets/js/27.d8b15b76.js"><link rel="prefetch" href="/assets/js/29.54667d47.js"><link rel="prefetch" href="/assets/js/3.f6602695.js"><link rel="prefetch" href="/assets/js/30.dd697263.js"><link rel="prefetch" href="/assets/js/31.aafbc8db.js"><link rel="prefetch" href="/assets/js/32.5fe2531d.js"><link rel="prefetch" href="/assets/js/33.c3dfca3c.js"><link rel="prefetch" href="/assets/js/34.22613e38.js"><link rel="prefetch" href="/assets/js/35.aad9af2b.js"><link rel="prefetch" href="/assets/js/36.badbd522.js"><link rel="prefetch" href="/assets/js/37.45905373.js"><link rel="prefetch" href="/assets/js/38.ab0de43e.js"><link rel="prefetch" href="/assets/js/39.d1a7492c.js"><link rel="prefetch" href="/assets/js/4.c7710dca.js"><link rel="prefetch" href="/assets/js/40.92c4cb14.js"><link rel="prefetch" href="/assets/js/41.cc19be50.js"><link rel="prefetch" href="/assets/js/42.c9b4b585.js"><link rel="prefetch" href="/assets/js/43.1af966c8.js"><link rel="prefetch" href="/assets/js/44.40ebac1c.js"><link rel="prefetch" href="/assets/js/45.469b8553.js"><link rel="prefetch" href="/assets/js/46.eb491d21.js"><link rel="prefetch" href="/assets/js/47.03d1fbf2.js"><link rel="prefetch" href="/assets/js/48.af296c16.js"><link rel="prefetch" href="/assets/js/49.3a42b55b.js"><link rel="prefetch" href="/assets/js/5.339eb2f5.js"><link rel="prefetch" href="/assets/js/50.ef35a161.js"><link rel="prefetch" href="/assets/js/51.284d50de.js"><link rel="prefetch" href="/assets/js/52.c4983004.js"><link rel="prefetch" href="/assets/js/53.83c193e1.js"><link rel="prefetch" href="/assets/js/54.08f26cd6.js"><link rel="prefetch" href="/assets/js/55.ef20313b.js"><link rel="prefetch" href="/assets/js/56.dc2772cf.js"><link rel="prefetch" href="/assets/js/57.add26447.js"><link rel="prefetch" href="/assets/js/58.ff8f2704.js"><link rel="prefetch" href="/assets/js/59.43fdbc04.js"><link rel="prefetch" href="/assets/js/6.0ce72a94.js"><link rel="prefetch" href="/assets/js/60.1a27c7c3.js"><link rel="prefetch" href="/assets/js/61.9ca63ff6.js"><link rel="prefetch" href="/assets/js/62.9ab09b12.js"><link rel="prefetch" href="/assets/js/63.a6b6d595.js"><link rel="prefetch" href="/assets/js/64.5e9ac56b.js"><link rel="prefetch" href="/assets/js/65.bcfb6015.js"><link rel="prefetch" href="/assets/js/66.5024eb22.js"><link rel="prefetch" href="/assets/js/67.5d83f99f.js"><link rel="prefetch" href="/assets/js/68.80f05874.js"><link rel="prefetch" href="/assets/js/69.6f9ff293.js"><link rel="prefetch" href="/assets/js/7.726c7fbf.js"><link rel="prefetch" href="/assets/js/70.92b749fb.js"><link rel="prefetch" href="/assets/js/71.a4248217.js"><link rel="prefetch" href="/assets/js/72.29aeb940.js"><link rel="prefetch" href="/assets/js/73.8918e90b.js"><link rel="prefetch" href="/assets/js/74.81fd32da.js"><link rel="prefetch" href="/assets/js/75.5357ccc2.js"><link rel="prefetch" href="/assets/js/76.66fc1725.js"><link rel="prefetch" href="/assets/js/77.6f29512b.js"><link rel="prefetch" href="/assets/js/78.a63871cd.js"><link rel="prefetch" href="/assets/js/79.c646997c.js"><link rel="prefetch" href="/assets/js/8.81d630fc.js"><link rel="prefetch" href="/assets/js/80.b5d5ad39.js"><link rel="prefetch" href="/assets/js/81.601aa569.js"><link rel="prefetch" href="/assets/js/82.99bc0640.js"><link rel="prefetch" href="/assets/js/83.06d4defc.js"><link rel="prefetch" href="/assets/js/84.44856307.js"><link rel="prefetch" href="/assets/js/85.3b88ee80.js"><link rel="prefetch" href="/assets/js/86.47c806cb.js"><link rel="prefetch" href="/assets/js/87.b5201cdf.js"><link rel="prefetch" href="/assets/js/88.f9ce8655.js"><link rel="prefetch" href="/assets/js/89.c1f12bf1.js"><link rel="prefetch" href="/assets/js/9.b6118830.js"><link rel="prefetch" href="/assets/js/90.e0f850a2.js"><link rel="prefetch" href="/assets/js/91.8166ca11.js"><link rel="prefetch" href="/assets/js/92.6ba6ce27.js"><link rel="prefetch" href="/assets/js/93.6e09fb58.js"><link rel="prefetch" href="/assets/js/94.1b324565.js"><link rel="prefetch" href="/assets/js/95.5308659f.js"><link rel="prefetch" href="/assets/js/96.306bee11.js"><link rel="prefetch" href="/assets/js/97.6e231fca.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ac2847d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpg" alt="Lindorof" class="logo"> <span class="site-name can-hide">Lindorof</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/archives.html" class="nav-link">
  文章清单
</a></div><div class="nav-item"><a href="/guide.html" class="nav-link">
  建站指南
</a></div><div class="nav-item"><a href="https://github.com/lindorof" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/archives.html" class="nav-link">
  文章清单
</a></div><div class="nav-item"><a href="/guide.html" class="nav-link">
  建站指南
</a></div><div class="nav-item"><a href="https://github.com/lindorof" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Rust/Rust_Book_Exp/" aria-current="page" class="sidebar-link">「RustBook」学习心得</a></li><li><a href="/Rust/Rust_Book_Exp/01 Getting Started/01 Getting Started.html" class="sidebar-link">1. 开始</a></li><li><a href="/Rust/Rust_Book_Exp/02 Programming a Guessing Game/01 Programming a Guessing Game.html" class="sidebar-link">2. 猜谜游戏</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>3. 基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Rust/Rust_Book_Exp/03 Common Programming Concepts/01 Variables and Mutability.html" class="sidebar-link">3.1. 变量和可变性</a></li><li><a href="/Rust/Rust_Book_Exp/03 Common Programming Concepts/02 Data Types.html" class="active sidebar-link">3.2. 数据类型</a></li><li><a href="/Rust/Rust_Book_Exp/03 Common Programming Concepts/03 How Functions Work.html" class="sidebar-link">3.3. 函数</a></li><li><a href="/Rust/Rust_Book_Exp/03 Common Programming Concepts/04 Comments.html" class="sidebar-link">3.4. 注释</a></li><li><a href="/Rust/Rust_Book_Exp/03 Common Programming Concepts/05 Contrl Flow.html" class="sidebar-link">3.5. 流程控制</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4. 所有权</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5. 结构体</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6. 枚举</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7. 模块</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8. 集合</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9. 错误处理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>10. 泛型及生命周期</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>11. 自动测试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>12. 命令行</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>13. 闭包及迭代器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>14. Cargo 和 Crates.io</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>15. 智能指针</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>16. 无畏并发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>17. 面向对象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>18. 模式与匹配</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>19. 高级特征</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_3-2-数据类型"><a href="#_3-2-数据类型" class="header-anchor">#</a> 3.2. 数据类型</h1> <p>Rust的数据类型有两大子集：</p> <ul><li>Scalar</li> <li>Compound</li></ul> <h2 id="scalar-types"><a href="#scalar-types" class="header-anchor">#</a> Scalar Types</h2> <p>Scalar子集里有四种数据类型：</p> <ol><li>整型</li> <li>浮点</li> <li>布尔</li> <li>字符</li></ol> <h3 id="整型"><a href="#整型" class="header-anchor">#</a> 整型</h3> <p>整型分为：</p> <ul><li>有符号，用 i 开头</li> <li>无符号，用 u 开头</li></ul> <p>整型类型汇总：</p> <table><thead><tr><th>长度</th> <th>有符号</th> <th>无符号</th></tr></thead> <tbody><tr><td>8-bit</td> <td>i8</td> <td>u8</td></tr> <tr><td>16-bit</td> <td>i16</td> <td>u16</td></tr> <tr><td>32-bit</td> <td>i32</td> <td>u32</td></tr> <tr><td>64-bit</td> <td>i64</td> <td>u64</td></tr> <tr><td>128-bit</td> <td>i128</td> <td>u128</td></tr> <tr><td>arch</td> <td>isize</td> <td>usize</td></tr></tbody></table> <p>关于arch：</p> <ul><li>取决于操作系统</li> <li>若系统是32位，则长度为32bit</li> <li>若系统是64位，则长度为64bit</li></ul> <p>存储范围：</p> <ul><li>有符号：<code>$-(2^{n-1})$</code> 至  <code>$(2^{n-1}-1)$</code></li> <li>无符号：<code>$0$</code> 至 <code>$(2^n-1)$</code></li> <li>例如，i8 的范围是 -128 至 127</li> <li>例如，u8 的范围是 0 至 255</li></ul> <p>整型的书写方式包括三部分：</p> <ol><li>类型前缀
<ul><li>十进制：无</li> <li>十六进制：0x</li> <li>八进制：0o</li> <li>二进制：0b</li></ul></li> <li>分隔符'_'
<ul><li>目的只是为了阅读方便，例如：</li> <li>98_222</li> <li>0xf1_ed_23_01</li> <li>0b1101_0010</li></ul></li> <li>类型后缀
<ul><li>目的是为了标识该数值的大小，例如：</li> <li>57u8</li> <li>0xf1_02i64</li></ul></li></ol> <p>分隔符'_'进一步说明：</p> <ul><li>在整型中，分隔符的作用只是为了代码阅读方便</li> <li>对编译器来说，分隔符其实是被忽略的</li> <li>因此，分隔符的位置并不会影响实际的数值内容</li> <li>例如，0x0102、0x01_02、0x0_1_0_2是一样的</li> <li>因此，我会习惯于将类型前缀、数值、类型后缀等几个要素都用分隔符分开，让阅读更清晰，例如：</li></ul> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> x1 <span class="token operator">=</span> <span class="token number">9_888</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> x2 <span class="token operator">=</span> <span class="token number">9_888_u32</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> x3 <span class="token operator">=</span> 0x_01_02<span class="token punctuation">;</span>
<span class="token keyword">let</span> x4 <span class="token operator">=</span> 0x_01_02_i64<span class="token punctuation">;</span>
<span class="token keyword">let</span> x5 <span class="token operator">=</span> 0b_1101_0010<span class="token punctuation">;</span>
<span class="token keyword">let</span> x6 <span class="token operator">=</span> 0b_1101_0010_u8<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>类型后缀的进一步说明：</p> <ol><li>可通过后缀来标识该数值的bit大小</li> <li>若将数值绑定到变量，则编译器就根据该数值的后缀所标识的大小来得到变量的类型</li> <li>因此，若变量声明了类型，数值也有类型后缀，则变量类型和后缀类型不一致时，编译错误</li></ol> <p>如何决定使用什么类型：</p> <ul><li>Rust对于整型数值默认为i32</li> <li>而i32类型是运算速度最快的，即使在64位系统中</li> <li>注意，意思就是说，即使在64位系统中，Rust默认的整型也是i32，除非使用isize或usize</li> <li>因此，使用默认的i32整型是最好的选择</li></ul> <p>整型的溢出：</p> <ul><li>基于前面讨论的整形存储范围，溢出可以理解为循环</li> <li>例如，对于u8，范围是0~255，则溢出后，256变为0，257变为1</li> <li>例如，对于i8，范围是-128~127，则溢出后，128变为-128，129变为-1</li></ul> <p>对溢出的处理：</p> <ul><li>Debug模式下，若发生了溢出，则运行效果就是panic</li> <li>Release模式下，则按照正常的上述溢出逻辑运行</li></ul> <h3 id="浮点"><a href="#浮点" class="header-anchor">#</a> 浮点</h3> <p>Rust的浮点数基于 ==IEEE-754== 标准：</p> <ul><li>f32，32-bit，单精度浮点数</li> <li>f64，64-bit，双精度浮点数</li></ul> <p>浮点数的书写方式：</p> <ol><li>只能是十进制方式，因此不允许十六进制、八进制、二进制等类型前缀</li> <li>可以任意使用分隔符，与整型类型</li> <li>可以有类型后缀，例如：</li></ol> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> f0 <span class="token operator">=</span> <span class="token number">2198.36</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> f1 <span class="token operator">=</span> <span class="token number">2_198.36</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> f2 <span class="token operator">=</span> <span class="token number">2_198.36_f32</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> f3 <span class="token operator">=</span> <span class="token number">2_198.36_f64</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如何决定使用什么类型：</p> <ul><li>Rust对于浮点数默认为f64</li> <li>因为对现在的CPU来说，f64和f32的运算速度差不多，但f64能容纳更高的精度</li> <li>因此使用默认的f64是最好的选择</li></ul> <h3 id="布尔"><a href="#布尔" class="header-anchor">#</a> 布尔</h3> <ul><li>关键字是 bool</li> <li>值有 true 和 false</li> <li>布尔型的空间大小：1个字节</li> <li>布尔型最多的使用场景就是通过 if 进行条件判断</li></ul> <p>例如：</p> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> b1 <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b2 <span class="token punctuation">:</span> bool <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="字符"><a href="#字符" class="header-anchor">#</a> 字符</h3> <ul><li>关键字是char，但没必要显式声明</li> <li>使用单引号'来表示一个字符，例如'A'</li> <li>Rust的char可以表示UNICODE中的字符范围：U+0000 ~ U+D7FF , U+E000 ~ U+10FFFF，其中就包含了 zero-width 字符</li> <li>因此字符除了ASCII外，还可以是中文字符，日文字符，emoji字符</li> <li>==基于存储方式（UTF-8），所以Rust中char的空间大小：4个字节==</li></ul> <p>关于 zero-width 字符：</p> <ul><li>Unicode中有一些字符叫做 zero-width ，意思就是：它是一个字符，有Unicode编码，但是没有宽度</li> <li>通俗解释：比如在两个字符中间加入一个 zero-width 字符，则这两个字符仍然是挨在一起的，但是移动一次光标发现光标不动，因为中间有一个 zero-width 字符</li> <li>因此，zero-width 字符并不是 <code>''</code> ，比如 <code>let c = ''</code> 是不被允许，因为 rust 没有 <code>空值</code> 的概念</li></ul> <p>下面是几种 zero-width 字符：</p> <table><thead><tr><th>Unicode值</th> <th>UTF-8存储值</th> <th>NAME</th></tr></thead> <tbody><tr><td>U+200B</td> <td>\xe2\x80\x8b</td> <td>ZERO WIDTH SPACE</td></tr> <tr><td>U+200C</td> <td>\xe2\x80\x8c</td> <td>ZERO WIDTH NON-JOINER</td></tr> <tr><td>U+200D</td> <td>\xe2\x80\x8d</td> <td>ZERO WIDTH JOINER</td></tr></tbody></table> <p>字符的书写方式：</p> <ol><li>直接通过单引号'来表示</li> <li>不允许类型前缀，不允许_分隔符，不允许类型后缀</li> <li>因为通过单引号就足以表示一个字符的信息</li></ol> <p>例如：</p> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> c1 <span class="token operator">=</span> <span class="token char string">'A'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> c2 <span class="token punctuation">:</span> char <span class="token operator">=</span> <span class="token char string">'B'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> c3 <span class="token operator">=</span> <span class="token char string">'我'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以将字符值赋值给整型，但限制如下：</p> <ol><li>必须增加类型前缀'b'</li> <li>只支持u8类型，也就是Byte</li></ol> <p>举例：</p> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token comment">//字符类型</span>
<span class="token keyword">let</span> i1 <span class="token operator">=</span> <span class="token char string">'A'</span><span class="token punctuation">;</span>

<span class="token comment">//字符类型</span>
<span class="token keyword">let</span> c2 <span class="token punctuation">:</span> char <span class="token operator">=</span> <span class="token char string">'B'</span><span class="token punctuation">;</span>

<span class="token comment">//u8类型，值是65</span>
<span class="token keyword">let</span> c3 <span class="token operator">=</span> <span class="token char string">b'A'</span><span class="token punctuation">;</span>

<span class="token comment">//u8类型，值是65</span>
<span class="token keyword">let</span> c4 <span class="token punctuation">:</span> u8 <span class="token operator">=</span> <span class="token char string">b'A'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="compound-types"><a href="#compound-types" class="header-anchor">#</a> Compound Types</h2> <p>Compound子集中有两种数据类型：</p> <ol><li>Tuple</li> <li>Array</li></ol> <h3 id="tuple"><a href="#tuple" class="header-anchor">#</a> Tuple</h3> <p>说明：</p> <ul><li>使用括号表示，多个值用逗号分隔</li> <li>各个值的数据类型可以不一致</li> <li>例如 (1, 1.5, true, 'A')</li> <li>tuple在声明时就必须确定各个值，且一旦声明结束，空间大小就是固定的，后续不能再增大或减小</li></ul> <p>数据类型的确定：</p> <ul><li>基于Scalar章节的内容，若不指定数据类型，则Rust会有对应的默认数据类型</li> <li>也可显式指定数据类型，例如 (i32, f64, bool, char)</li></ul> <p>举例：</p> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token comment">//使用默认数据类型</span>
<span class="token keyword">let</span> tup1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">,</span> <span class="token char string">'我'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//指定数据类型</span>
<span class="token keyword">let</span> tup2 <span class="token punctuation">:</span> <span class="token punctuation">(</span>i16<span class="token punctuation">,</span> f64<span class="token punctuation">,</span> bool<span class="token punctuation">,</span> char<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">,</span> <span class="token char string">'我'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 指定数据类型</span>
<span class="token keyword">let</span> tup3 <span class="token operator">=</span> <span class="token punctuation">(</span>86_i128<span class="token punctuation">,</span> <span class="token number">1.2_f64</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">,</span> <span class="token char string">'我'</span><span class="token punctuation">,</span> <span class="token char string">b'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>解构Tuple的方式一：模式匹配</p> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> tup <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">6.4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token operator">=</span> tup<span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{} - {} - {}&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>解构Tuple的方式二：下标访问</p> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> tup <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">6.4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{} - {} - {}&quot;</span><span class="token punctuation">,</span> tup<span class="token number">.0</span><span class="token punctuation">,</span> tup<span class="token number">.1</span><span class="token punctuation">,</span> tup<span class="token number">.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>注意：下标从0开始</p></blockquote> <h3 id="array"><a href="#array" class="header-anchor">#</a> Array</h3> <p>说明:</p> <ul><li>在array中的数据类型是一致的</li> <li>声明结束后，array的大小就是固定的，不会增加也不会减小，即使array中元素的内容可能会变化</li></ul> <blockquote><p>注意：Vector的空间大小是可变的，在Chapter8会讨论</p></blockquote> <p>声明语法 &amp; 数据类型 &amp; 元素个数：</p> <ul><li>let a = [1,2,3,4,5]，编译器会自动推断数据类型和元素个数，当然，数据类型仍然是基于Rust默认的数据类型</li> <li>let a : [i64;5] = [1,2,3,4,5]，即显式声明数据类型和元素个数，使用';'分隔，二者都必须同时存在，且声明的元素个数必须与实际的元素个数一致</li></ul> <p>使用array的场景：</p> <ol><li>元素个数确定时，例如一年的12个月的名称</li> <li>希望数据分配在栈上而不是堆上时</li></ol> <p>访问array中的元素：</p> <ul><li>由于array的内存是连续的，因此可直接通过下标访问</li> <li>访问语法：a[0]</li></ul> <blockquote><p>注意：下标从0开始</p></blockquote> <p>越界访问array元素：</p> <ul><li>即下标值超过数组实际大小时</li> <li>编译期间可能是正常的</li> <li>但运行时程序会panic</li> <li>这与其它某些语言不一样，例如C++</li> <li>对于Rust来说，越界访问array时的panic是一种安全的机制，而不是仍然允许访问内存进而导致内存错误</li></ul> <blockquote><p>下面举几个有趣的越界访问array的例子，运行时都会导致panic，但在编译期间的结果提示会不同：</p></blockquote> <p>例：check正常，build报错</p> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>例：check正常，build正常，运行panic</p> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/3/2019, 8:13:20 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Rust/Rust_Book_Exp/03 Common Programming Concepts/01 Variables and Mutability.html" class="prev">
        3.1. 变量和可变性
      </a></span> <span class="next"><a href="/Rust/Rust_Book_Exp/03 Common Programming Concepts/03 How Functions Work.html">
        3.3. 函数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.b639eb72.js" defer></script><script src="/assets/js/2.5df156af.js" defer></script><script src="/assets/js/28.2574be13.js" defer></script>
  </body>
</html>
