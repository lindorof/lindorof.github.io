(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{514:function(t,s,e){"use strict";e.r(s);var r=e(27),a=Object(r.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_12-6-stdout-stderr"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-6-stdout-stderr"}},[t._v("#")]),t._v(" 12.6. stdout & stderr")]),t._v(" "),e("h5",{attrs:{id:"原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),e("ol",[e("li",[t._v("rust 终端有两种输出：standard output ("),e("em",[e("strong",[t._v("stdout")])]),t._v(") 和 standard error ("),e("em",[e("strong",[t._v("stderr")])]),t._v(")")]),t._v(" "),e("li",[e("em",[e("strong",[t._v("stdout")])]),t._v(" 对应的是 "),e("code",[t._v("println!")])]),t._v(" "),e("li",[e("em",[e("strong",[t._v("stderr")])]),t._v(" 对应的是 "),e("code",[t._v("eprintln!")])]),t._v(" "),e("li",[e("em",[e("strong",[t._v("stderr")])]),t._v(" 总是输出到控制台并显示")]),t._v(" "),e("li",[e("em",[e("strong",[t._v("stdout")])]),t._v(" 有两种选择，一种是输出到控制台显示，另一种是重定向到文件")]),t._v(" "),e("li",[e("em",[e("strong",[t._v("stdout")])]),t._v(" 默认是输出到控制台显示，而要重定向到文件，则需要使用 "),e("code",[t._v("> filename")]),t._v(" ，例如 "),e("code",[t._v("cargo run > output.txt")])])]),t._v(" "),e("h5",{attrs:{id:"进行重定向"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进行重定向"}},[t._v("#")]),t._v(" 进行重定向")]),t._v(" "),e("ul",[e("li",[t._v("成功的信息重定向到文件中")]),t._v(" "),e("li",[t._v("错误的信息输出到控制台显示")]),t._v(" "),e("li",[t._v("在我们的程序中，错误处理都集中在 "),e("code",[t._v("main")]),t._v(" 函数中，因此统一在 "),e("code",[t._v("main")]),t._v(" 中将 "),e("code",[t._v("println!")]),t._v(" 更改为 "),e("code",[t._v("eprintln!")]),t._v(" 即可")]),t._v(" "),e("li",[t._v("这也呼应了本章开头提到的改进点：我们应当遵循 ++将错误集中到一个地方统一处理++ 的原则")]),t._v(" "),e("li",[t._v("然后对 "),e("em",[e("strong",[t._v("stdout")])]),t._v(" 进行重定向，例如："),e("code",[t._v("cargo run > output.txt")])])]),t._v(" "),e("p",[t._v("进行上述修改后，测试失败的情况：")]),t._v(" "),e("blockquote",[e("p",[t._v("控制台输出错误信息，output.txt 文件内容为空")])]),t._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ cargo run > output.txt\n\nproblem parsing args : not enough args\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("然后测试成功的情况：")]),t._v(" "),e("blockquote",[e("p",[t._v("控制台输出信息为空，output.txt 中保存了查找结果")])]),t._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ CASE_INS=1 cargo run line test.txt > output.txt\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])])])}),[],!1,null,null,null);s.default=a.exports}}]);