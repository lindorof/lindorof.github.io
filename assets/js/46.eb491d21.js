(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{529:function(t,n,a){"use strict";a.r(n);var s=a(27),r=Object(s.a)({},(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_9-0-前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-0-前言"}},[t._v("#")]),t._v(" 9.0. 前言")]),t._v(" "),a("h3",{attrs:{id:"关于错误处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于错误处理"}},[t._v("#")]),t._v(" 关于错误处理")]),t._v(" "),a("p",[t._v("Rust 可靠性的保证包含了错误处理。大多数情况下，Rust 会识别出可能的错误并停止编译，从而在程序被部署之前提前发现和解决错误。")]),t._v(" "),a("p",[t._v("很多语言不区分错误的类别，并使用 exception 机制，但Rust 没有exception ，而是把错误分为两类并有对应的处理方式：")]),t._v(" "),a("ol",[a("li",[t._v("recoverable，例如要访问的文件不存在，使用 "),a("code",[t._v("Result<T, E>")])]),t._v(" "),a("li",[t._v("unrecoverable，例如越界访问某个数组的下标，使用 "),a("code",[t._v("panic!")])])]),t._v(" "),a("h3",{attrs:{id:"unwinding-and-aborting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unwinding-and-aborting"}},[t._v("#")]),t._v(" Unwinding and Aborting")]),t._v(" "),a("p",[t._v("当 "),a("code",[t._v("panic!")]),t._v(" 发生的时候，rust 有两种机制来处理：")]),t._v(" "),a("ul",[a("li",[t._v("Unwinding")]),t._v(" "),a("li",[t._v("Aborting")])]),t._v(" "),a("h5",{attrs:{id:"unwinding"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unwinding"}},[t._v("#")]),t._v(" Unwinding")]),t._v(" "),a("ol",[a("li",[t._v("程序打印错误信息")]),t._v(" "),a("li",[t._v("逐层回溯 stack")]),t._v(" "),a("li",[t._v("清理各个函数的数据")]),t._v(" "),a("li",[t._v("退出程序")])]),t._v(" "),a("h5",{attrs:{id:"aborting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aborting"}},[t._v("#")]),t._v(" Aborting")]),t._v(" "),a("ol",[a("li",[t._v("程序打印错误信息")]),t._v(" "),a("li",[t._v("直接退出程序")]),t._v(" "),a("li",[t._v("清理内存的工作由操作系统来完成")])]),t._v(" "),a("h5",{attrs:{id:"unwinding-or-aborting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unwinding-or-aborting"}},[t._v("#")]),t._v(" Unwinding or Aborting")]),t._v(" "),a("p",[t._v("二者的区别：")]),t._v(" "),a("ul",[a("li",[t._v("Unwinding 是比较耗费时间的")]),t._v(" "),a("li",[t._v("rust 默认使用 Unwinding 机制")]),t._v(" "),a("li",[t._v("而使用 Aborting 机制时，编译出来的程序会小一些")])]),t._v(" "),a("p",[t._v("使用 Aborting ：")]),t._v(" "),a("blockquote",[a("p",[t._v("在 Cargo.toml 中修改 "),a("code",[t._v("[profile]")])])]),t._v(" "),a("div",{staticClass:"language-toml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("profile.release")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("panic")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'abort'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])])}),[],!1,null,null,null);n.default=r.exports}}]);